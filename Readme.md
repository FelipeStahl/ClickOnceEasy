# ClickOnceEasy #

This project simplify the **ClickOnce deployment** of all applications type.

Just **Configure**, **Build** your app in the *Bin folder* and **Run the script**! 

That's it! your app and all his updates are now available to your customers!

## Files #####
1) **deploy.ps1**: the deployement script (contains all the parameters and generation's commands)
2) **mage.exe**: *ClickOnce* packager
3) **Tools/Launcher.exe**: This exe decompress the Application (first execution) then run it (source code in *Tools/src*)
3) **readme.md**

## Variables (deploy.ps1) ##
1) **$Version**: version of the app (need to be incremented so the user can update his version)
2) **$AppName**: app name (the one user will see)
3) **$Publisher**: publisher name
4) **$ServerUrl**: the url where the app will be published
5) **$BinDirectory**: Bin Folder path
6) **$OutputDirectory**: Output Folder path
7) **$ToolsDirectory**: Tools Folder path

## Folders ##
1) **Bin**: contains the binary generated by Unity
2) **Output**: Application Bin (after compression), the *Launcher.exe*, the *Manifest* and the *ClickOnce launcher*
3) **Tools**: The *Launcher.exe* and his source code. This exe decompress the Application (first execution) then run it

## How to ##
1) Put Application's build files in the *Bin* folder (or configure the Application's Bin folder path in *deploy.ps1*)
2) In *deploy.ps1*: configure the **$AppName**, **$Publisher** and **$ServerUrl**
3) run powershell script: *deploy.ps1*
4) then run the *ClickOnce launcher* named *AppName.application* (from the *Output* folder or from the **$ServerUrl**)

## What it does (deploy.ps1) ##
1) The script take the Application's build, compress and copy it in the *Output* folder
	* Add the Launcher to the *Output* folder and rename it to **$AppName**
2) Generate the manifest
	* TODO: sign the manifest with Authenticode certificate
3) Generate the installer
	* TODO: sign the installer with Authenticode certificate
4) Send all the files from *Output* folder to the **$ServerUrl**
	* (Application project zip + *ClickOnce launcher* + renamed launcher + manifest)
	
**Warning**: do not call the Unity project the same as $AppName in deploy script (or the Launcher and the Unity's project exes will have the same name)
